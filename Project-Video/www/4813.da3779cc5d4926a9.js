"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4813],{4813:(B,y,r)=>{r.r(y),r.d(y,{Tab2PageModule:()=>Z});var s=r(4944),d=r(9256),g=r(4806),p=r(1318),e=r(3019),f=r(5531),c=r(4254),m=r(3020);class h{constructor(n){this.dead=new m.X(!1),Object.assign(this,n),this.currentHealth.subscribe(t=>{t<=0?!0!==this.dead.value&&this.dead.next(!0):this.dead.next(!1)})}damage(n){this.currentHealth.next(this.currentHealth.value-n)}getEnemyHealthPercentage(){return this.currentHealth.value/this.maxHealth}}var l,v=r(5922);class o{constructor(){l.set(this,[]),(0,c.Q_)(this,l,"f").push(new h({name:"goblin",id:1,maxHealth:10,currentHealth:new m.X(10),defense:2,attack:2,speed:3,treadLevel:1,exsperienceGain:30,lootTable:v.i.commen})),(0,c.Q_)(this,l,"f").push(new h({name:"kobold",id:2,maxHealth:15,currentHealth:new m.X(15),defense:1,attack:3,speed:4,treadLevel:1,exsperienceGain:40,lootTable:v.i.uncommen})),(0,c.Q_)(this,l,"f").push(new h({name:"bandit",id:3,maxHealth:50,currentHealth:new m.X(50),defense:7,attack:5,speed:0,treadLevel:2,exsperienceGain:100,lootTable:v.i.uncommen}))}getEnemyByName(n){return(0,c.Q_)(this,l,"f").find(t=>t.name===n)}findEnemyByTreadLevel(n){return(0,c.Q_)(this,l,"f").filter(t=>t.treadLevel===n)}resetEnemy(n){const t=(0,c.Q_)(this,l,"f").find(i=>i===n);t.currentHealth.next(t.maxHealth)}}l=new WeakMap,o.\u0275fac=function(n){return new(n||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"});var b=r(3493);function T(a,n){if(1&a&&(e.TgZ(0,"div")(1,"p"),e._uU(2),e.qZA(),e._UZ(3,"ion-progress-bar",7),e.qZA()),2&a){const t=e.oxw();e.xp6(2),e.lnq(" ",t.activeEnemy.name,": ",t.activeEnemy.maxHealth,"/",t.activeEnemy.currentHealth.value," "),e.xp6(1),e.Q6J("value",t.activeEnemy.getEnemyHealthPercentage())}}function E(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"ion-button",8),e.NdJ("click",function(){e.CHM(t);const u=e.oxw();return e.KtG(u.attack())}),e._uU(1,"damage"),e.qZA()}}function P(a,n){1&a&&(e.TgZ(0,"p"),e._uU(1," you won"),e.qZA())}function x(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"ion-button",8),e.NdJ("click",function(){e.CHM(t);const u=e.oxw();return e.KtG(u.newBattle())}),e._uU(1,"New Battle"),e.qZA()}}const H=[{path:"",component:(()=>{class a{constructor(t,i,u){this.playerService=t,this.enemyService=i,this.itemService=u,this.newBattle()}setEnemyListeners(){this.subscrition=this.activeEnemy.dead.subscribe(t=>{!0===t&&(this.playerService.givePlayerBattleExperience(this.activeEnemy.exsperienceGain),this.playerService.givePlayerItem(this.itemService.getRandomEquipmentOfRarity(this.activeEnemy.lootTable)))})}attack(){this.activeEnemy.damage(this.playerService.getPlayerCurrentAttack()),this.playerService.playerDamage(this.activeEnemy.attack)}newBattle(){void 0!==this.activeEnemy&&(this.subscrition.unsubscribe(),this.enemyService.resetEnemy(this.activeEnemy));const t=this.enemyService.findEnemyByTreadLevel(this.playerService.getPlayerLevel()),i=t.length;this.activeEnemy=t[Math.floor(Math.random()*i)],this.setEnemyListeners(),this.playerService.healPlayer(this.playerService.getPlayerMaxHealth()-this.playerService.getPlayerCurrentHealth())}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(f.l),e.Y36(o),e.Y36(b.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-tab2"]],decls:17,vars:10,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],[4,"ngIf"],["color","success",3,"value"],[3,"click",4,"ngIf"],["color","danger",3,"value"],[3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3," Batlle "),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),e._uU(8,"Tab 2"),e.qZA()()(),e.YNc(9,T,4,4,"div",4),e.TgZ(10,"div")(11,"p"),e._uU(12),e.qZA(),e._UZ(13,"ion-progress-bar",5),e.YNc(14,E,2,0,"ion-button",6),e.qZA(),e.YNc(15,P,2,0,"p",4),e.YNc(16,x,2,0,"ion-button",6),e.qZA()),2&t&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(5),e.Q6J("ngIf",!1===i.activeEnemy.dead.value),e.xp6(3),e.lnq(" ",i.playerService.getPlayerName(),": ",i.playerService.getPlayerMaxHealth(),"/",i.playerService.getPlayerCurrentHealth()," "),e.xp6(1),e.Q6J("value",i.playerService.getPlayerHealthPercentage()),e.xp6(1),e.Q6J("ngIf",!1===i.activeEnemy.dead.value),e.xp6(1),e.Q6J("ngIf",i.activeEnemy.dead.value),e.xp6(1),e.Q6J("ngIf",i.activeEnemy.dead.value))},dependencies:[s.YG,s.W2,s.Gu,s.X7,s.wd,s.sr,d.O5]}),a})()}];let S=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[p.Bz.forChild(H),p.Bz]}),a})(),Z=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[s.Pc,d.ez,g.u5,S]}),a})()}}]);